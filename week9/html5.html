<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>HTML5 APIs</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="618ada90-1296-43e8-8998-2b2d7c929a4d" class="page sans"><header><h1 class="page-title">HTML5 APIs</h1></header><div class="page-body"><h2 id="543f4237-f841-4ecb-b76b-764f07041915" class="">HTML5</h2><p id="78af1ae1-7e38-4512-bf63-e9a4a6b77126" class="">The W3C plans to develop future versions of HTML5 much more frequently than previously, using smaller version increments.</p><p id="1bbd57c0-8534-4df3-ace6-f045d245f431" class="">The HTML5 specification is separated into modules that allow different features to be developed at different paces then implemented without having to wait for other features to be completed. It also means that when a previously unforeseen development occurs, a new module can be created to cater for it. Modules can be at different stages of maturity, from ideas to full implementation. A useful site that checks to see if a specific feature can be used is <a href="http://caniuse.com/">Can I Use</a>.</p><h3 id="3acb7044-bbd4-4c95-b8e2-90fc76aed668" class="">The <code>data-</code> Attribute</h3><p id="aa01b24d-3487-4d77-a6ee-dc39ea6872ea" class="">The <code>data-</code> attribute is a way of embedding data in a web page using custom attributes that are ignored by the browser. They’re also private to a page, so are not intended to be used by an external service – their sole purpose is to be used by a JavaScript program. This means they’re perfect for adding data that can be used as a hook that the program utilizes to access information about a particular element on the page.</p><p id="68740cd6-9190-43b1-81d7-94826ee02855" class="">Each element has a <code>dataset</code> property that can be used to access any data- attributes it contains. Here’s an example of some markup:</p><pre id="d5928daf-4862-49c8-b62b-999ed52d5bd1" class="code code-wrap"><code>&lt;div id=&#x27;hero&#x27; data-powers=&#x27;flight superSpeed&#x27;&gt;
    Superman
&lt;/div&gt;</code></pre><pre id="3e388067-fad7-4e4f-b574-d805eac1d213" class="code code-wrap"><code>const superman = document.getElementById(&#x27;hero&#x27;);
const powers = superman.dataset.powers;
&lt;&lt; &#x27;flight superSpeed&#x27;</code></pre><h2 id="77bef193-715f-46ff-a45b-ce6598ed9bb3" class="">HTML5 APIs</h2><p id="e8bd703a-0f2c-4f98-90c2-a39313865b69" class="">The HTML5 specification contains a number of APIs that help to gain access to hardware, such as cameras, batteries, geolocation, and the graphics card. Hardware evolves quickly, and APIs are frequently introduced to give developers access, and control new features that appear in the latest devices.</p><h3 id="aaa92e2f-c504-42ed-9db5-a6a4099e269c" class="">HTML5 Web Storage</h3><p id="a0949a2c-dddf-47b0-ad2e-6d2d6e10e0a9" class="">The Web Storage API provides a key-value store on the client’s computer that is similar to using cookies but has fewer restrictions, more storage capacity, and is generally easier to use. This makes it perfect for storing information about users, as well as storing application-specific information that can then be used during future sessions.</p><p id="07c24a07-703f-4197-827c-65399ece2203" class="">The Web Storage API has some crucial differences with cookies:</p><ul id="399f4cf4-cc06-4392-bc80-5d4bc9a8665b" class="bulleted-list"><li>Information stored is<em>not</em>shared with the server on every request.</li></ul><ul id="7ba1a502-de40-42f3-9cb7-b0e6b72c108d" class="bulleted-list"><li>Information is available in multiple windows of the browser (but only if the domain is the same).</li></ul><ul id="430f4ba9-1657-4272-acc6-86d6e9410f3e" class="bulleted-list"><li>Storage capacity limit is much larger than the 4KB limit for cookies ( There is no actual limit in the specification, but most browsers have a limit set at 5GB per domain.).</li></ul><ul id="95880a8f-69b5-4c9d-a736-7bb4716b71d1" class="bulleted-list"><li>Any data stored does not automatically expire as it does with cookies. This potentially makes cookies a better choice for something like showing a popup once a day.</li></ul><p id="3730bd24-c985-4da2-a44f-deb723f3eed3" class="">If a browser supports the Web Storage API, the <code>window</code> object will have a property called <code>localStorage</code> , which is a native object with a number of properties and methods used to store data. The information is saved in the form of key-value pairs, and the values can only be strings. There is also a <code>sessionStorage</code> object that works in the same way, although the data is only saved for the current session.</p><p id="6af56fab-7ea2-4a5d-a2d6-ced48fbbd81e" class="">Here is a basic example of storing information. To save a value locally, use:</p><pre id="59b7ed61-f9f6-4130-a5e6-ae47d84b2baa" class="code code-wrap"><code>localStorage.setItem(&#x27;name&#x27;, &#x27;Walter White&#x27;);</code></pre><p id="4e4b2a75-8278-4fd2-8a52-72d84ffdad2a" class="">To illustrate that it’s being saved locally, try completely closing your browser, reopening it, and entering the following code in the console:</p><pre id="04644a77-f46f-4c1a-812c-ee758eac0477" class="code code-wrap"><code>localStorage.getItem(&#x27;name&#x27;); 
&lt;&lt; &quot;Walter White&quot;</code></pre><p id="f5640e5c-a129-4a21-9c57-1b41dd06776e" class="">Rather than using the <code>getItem()</code> and <code>setItem()</code> methods, assignment can be used instead. In the next example, we simply reference <code>localStorage.name</code> as if it was a variable to change its value:</p><pre id="94c0998c-0579-434e-91f5-e30c788f4d8c" class="code code-wrap"><code>localStorage.name = &#x27;Heisenberg&#x27;; 
console.log(localStorage.name); 
&lt;&lt; &quot;Heisenberg&quot;;</code></pre><p id="a2411256-553f-4f3f-857c-5f1002e70480" class="">To remove an entry from local storage, use the <code>removeItem</code> method:</p><pre id="1a85804e-5e6b-4db5-84f6-63a180570945" class="code code-wrap"><code>localStorage.removeItem(&#x27;name&#x27;);

// Alternatively, this can be done using the delete operator:
delete localStorage.name;</code></pre><p id="8623cf3e-36c9-465b-9847-e4d99544e92c" class="">To completely remove everything stored in local storage, use the <code>clear()</code> method:</p><pre id="59e36396-e511-4672-8b11-a2ae749e4716" class="code code-wrap"><code>localStorage.clear();</code></pre><p id="c084feab-f1b5-4f5b-92e1-4ac368f89f7b" class="">Every time a value is saved to local storage, a <code>storage</code> event is fired. Note that this event is only fired on any <code>other</code> windows or tabs from the same domain, and only if the value of the item being saved changes. The event object sent by the event listener to the callback has a number of properties that provide information about the updated item:</p><ul id="31e67bfa-9702-40de-ad02-9ffef16f61f6" class="bulleted-list"><li><code>key</code> tells us the key of the item that changed</li></ul><ul id="6407ddeb-402e-46be-ab00-ecaedb87e9dc" class="bulleted-list"><li><code>newValue</code> tells us the new value to which it has been changed</li></ul><ul id="5d9d2deb-f49c-4198-9630-f635d241703c" class="bulleted-list"><li><code>oldValue</code> tells us the previous value before it was changed</li></ul><ul id="84b0869e-a9eb-4ac2-a2b6-4da7af1d2ed3" class="bulleted-list"><li><code>storageArea</code> tells us if it is stored in local or session storage.</li></ul><p id="e88df4e3-b520-4a67-9e32-67167a11b30c" class="">The code following will add an event listener that logs information about any changes to the Web Storage (note that this example won&#x27;t work locally as it needs to be running on a server):</p><pre id="69f666a3-745d-4db6-b29d-7003f53d2e87" class="code code-wrap"><code>addEventListener(&#x27;storage&#x27;, (event) =&gt; {
console.log(`The ${event.key} was updated from ${event.oldValue} to ${event.newValue} and saved in 
${event.storageArea}`) }, false);</code></pre><p id="e3a3f5d8-79d6-43c0-a5da-3da9866b5bf6" class="">The fact that only strings can be saved might seem like a restriction at first, but by using JSON, we can store any JavaScript object in local storage.</p><h3 id="c59a3253-9d95-4e21-9e2a-6a57b2a34fac" class="">Geolocation</h3><p id="28dba99e-12bd-4efa-a452-60959bfe1fcb" class="">The Geolocation API is used to obtain the geographical position of the device. This means it can be used to find the user’s exact location, then link to nearby places or measure the speed at which the user is moving. This information can then be used to filter data based on the user&#x27;s location or speed and direction of travel. An example of this might be a search function that returns results based on your location. Because of privacy concerns, permission to use this has to be granted by the user first.</p><p id="faea369f-319e-46d0-95ef-e04558024654" class="">f geolocation is available, it will be a property of the navigator object that we met in Chapter 9. This property has a method called <code>getCurrentPosition()</code> that will return a <code>position</code> object to a specified callback function, called <code>youAreHere()</code> in the example:</p><pre id="99b55ec8-9598-479a-b17c-721284da2697" class="code code-wrap"><code>navigator.geolocation.getCurrentPosition(youAreHere);

function youAreHere(position) {
    console.log(`Latitude: ${position.coords.latitude}, Longitude: ${position.coords.longitude}`); 
}</code></pre><p id="07af291b-6189-4aca-bb4c-06c3d88fe1e5" class="">The <code>position</code> object has several other properties that can be used to find out information about the location and movement of the device:</p><ul id="55cf4238-8e2c-465e-921a-7053bbc4068c" class="bulleted-list"><li><code>position.speed</code> property returns the ground speed of the device in meters per second.</li></ul><ul id="9107809e-bf0d-4b12-bdf5-c2c590dbafb2" class="bulleted-list"><li><code>position.altitude</code> property returns an estimate of the device’s altitude in meters above the<a href="http://en.wikipedia.org/wiki/World_Geodetic_System">WGS84</a>ellipsoid, which is a standard measurement for the center of the Earth.</li></ul><ul id="6850401f-84ea-4b5e-bc06-69d1f8aa48cd" class="bulleted-list"><li><code>position.heading</code> property returns the direction the device is moving in. This is measured as a bearing in degrees, clockwise from North.</li></ul><ul id="056f58cd-308e-4693-bd5b-89e0c90d0881" class="bulleted-list"><li><code>position.timestamp</code> property returns the time that the position information was recorded.</li></ul><p id="7d7922b3-4ea2-4494-86f0-d6b7c27f0787" class="">The <code>position</code> object also has properties that calculate the accuracy of the measurements. These can be useful, as sometimes you only need to know the town or city users are in, while at other times you may need their exact position. <code>position.accuracy</code> property returns the accuracy of the <code>latitude</code> and <code>longitude</code> properties in meters. The lower the returned value, the more accurate the measurements are, as is the case for the <code>position.altitudeAccuracy</code> property, which returns the accuracy of the <code>altitude</code> property in meters.</p><p id="0539d8c3-6a47-40b3-b09c-033675d9c664" class="">In addition, the <code>geolocation</code> object has a <code>watchPosition()</code> method that will call a callback function every time the position of the device is updated. This method returns an ID that can be used to reference the position being watched:</p><pre id="6c2ede0c-d509-4b42-b1f3-7cb23674a4a3" class="code code-wrap"><code>const id = navigator.geolocation.watchPosition(youAreHere);

/* The clearWatch() method can be used to stop the callback being called, using the ID of the watch as an argument:*/
navigator.geolocation.clearWatch(id);</code></pre><h3 id="d3597e25-fe1d-4c1d-8878-94e21c574d93" class="">Web Workers</h3><p id="4a624f99-81b4-4fe3-ac21-c39ca996d6f3" class="">We saw in earlier chapters that JavaScript is a single-threaded language, meaning that only one process can run at one time. Web workers allow processes to be run in the background, adding support for concurrency in JavaScript. The idea is that any processes that could take a long time are carried out in the background, so a website will continue to function without fear of the dreaded &#x27;script has become unresponsive&#x27; message that occurs when a script runs for too long.</p><p id="27c49a38-b34c-4384-9dd3-f53286f1af1f" class="">To get started, use the <code>Worker()</code> constructor function to create a new worker:</p><pre id="9c0150b8-4a83-443a-b59b-052e3803e874" class="code code-wrap"><code>const worker = new Worker(&#x27;task.js&#x27;);</code></pre><p id="9e03c38b-50be-4ca7-b56b-c2644c36dff0" class="">This function takes the name of another JavaScript file as an argument. In the example, this is a file called &#x27;task.js&#x27;. If this file exists, it will be downloaded asynchronously. The worker will only start once the file has finished downloading completely. If the file doesn’t exist, an error is thrown.</p><p id="c3611bb7-294c-4fe4-9534-d9a4868caffd" class="">The variable that’s assigned to the constructor function ( <code>worker</code> in our example) can now be used to refer to the worker in the main program. In the worker script (&#x27;task.js&#x27;), the keyword <code>self</code> is used to refer to the worker.</p><p id="a46e1d0a-5554-4004-a86c-5fab3910aebd" class="">Web workers use the concept of messages to communicate back and forth between the main script and worker script. The <code>postMessage()</code> method can be used to send a message <em>and</em> start the worker working. The argument to this method can send any data to the web worker. To post a message <em>to</em> the worker, the following code is used inside the main script:</p><pre id="2c861680-c3f9-4e6f-a216-f8a547e939c2" class="code code-wrap"><code>worker.postMessage(&#x27;Hello&#x27;);</code></pre><p id="f27932f4-cf73-409a-bb35-4f0963dd5459" class="">To post a message <em>from</em> the worker, the following is used in the worker script:</p><pre id="25662b31-b1a8-4fe7-93d7-6d22b0599bc9" class="code code-wrap"><code>self.postMessage(&#x27;Finished&#x27;);</code></pre><p id="ed41d59f-1cab-4f83-9ee6-1638ccbf3bf0" class="">When a message is posted, a <code>message</code> event is fired, so they can be dealt with using an event listener. The data sent with the message as an argument is stored in the <code>data</code> property of the <code>event</code> object that’s passed to the callback function. The following example would log any data returned from the worker to the console:</p><pre id="742bc0e6-102b-469d-b345-35eb13fc56dd" class="code code-wrap"><code>worker.addEventListener(&#x27;message&#x27;, (event) =&gt; {
    console.log(event.data);
}, false);</code></pre><p id="d0ebee7f-6302-493a-ad24-0018c0244d31" class="">When a worker has completed its task, it can be stopped using the <code>terminate() </code>method from within the main script:</p><pre id="66de87a0-21ed-47a9-9067-3fae7ca3ef71" class="code code-wrap"><code>worker.terminate();

// Or using the close() method from inside the worker script:
self.close();</code></pre><h3 id="f4f8148b-6ed0-4a29-b4f5-5c626a2f6b64" class="">Service Workers</h3><p id="1e37d594-a5eb-4b34-ac6a-fc9b35b1d6a7" class="">The Service Worker API allows a worker script to run in the background with the added benefit of being able to intercept network requests. This allows you to take alternative action if the network is offline, and effectively create app-like offline experiences. Service workers also allow access to push notifications and background syncing. Service workers require a secure network to run on HTTPS to avoid any malicious code hijacking network requests.</p><h3 id="44d6761b-4dd4-448f-96dc-80ff6cb3109f" class="">Websockets</h3><p id="2e964dd5-a37d-49fe-9b21-ae9e627c6795" class="">Websocket is a new protocol that allows two-way communication with a server – also known as push messaging. This means that a connection is kept open and responses are ‘pushed’ to the client as soon as they are received.</p><h3 id="573aea7a-47b3-40e3-9204-654bb86487d1" class="">Notifications</h3><p id="5b88c26e-c7e3-4046-8b60-4916b6a6701b" class="">The Notification API allows you to show messages using the system&#x27;s notifications. This is usually a popup in the corner of the screen, but it changes depending on the operating system. An advantage of using the system notification is that they will still be displayed even if the web page that calls them isn&#x27;t the current tab.</p><p id="463617a5-091b-4ce0-9ee5-687e27e994a0" class="">Before you can send notifications, you need to get permission granted by the user.</p><pre id="2403fcd6-a786-4bd1-9141-315afe8d4e51" class="code code-wrap"><code>if(window.Notification) {
    Notification.requestPermission();
}</code></pre><p id="01e2e0eb-3cb9-4322-93da-924576e40b05" class="">This returns a promise with the <code>permission</code> property of the <code>Notification</code> object set to either &#x27;granted&#x27; or &#x27;denied&#x27;. If it’s set to granted, you can create a new notification using a constructor function, like so:</p><pre id="928f9b97-a73e-44c4-8cfe-c1e134cf5dca" class="code code-wrap"><code>if(window.Notification) {
    Notification.requestPermission()
    .then((permission) =&gt; {
        if(Notification.permission === &#x27;granted&#x27;) {
        new Notification(&#x27;Hello JavaScript!&#x27;);
        }
    });
}

// Creating a notification using the Notification Constructor
const notification = new Notification(&#x27;JavaScript: Novice to Ninja&#x27;,{
    body: &#x27;The new book from SitePoint&#x27;,
    icon: &#x27;sitepointlogo.png&#x27;
});</code></pre><p id="b3b74a6c-99f5-4b22-9ea0-81be559e4296" class="">You can close the notification programmatically using the <code>close()</code> method:</p><pre id="dfa1a62d-e534-4241-90c6-483884a66526" class="code code-wrap"><code>notification.close();</code></pre><p id="526c712a-44dd-42af-bba2-ad9e866ec39f" class="">The notification instance has a number of events that it can react to, including <code>click</code> (when a user clicks on it), <code>show</code> (when the notification appears) and <code>close</code> (when the notification is closed).</p><p id="4f1123a8-166e-4370-9933-43f3e448f2a7" class="">For example, you could open a new window when the user clicked on the notification using the following code:</p><pre id="33029493-1f6a-4e60-8744-f2aaf6234d93" class="code code-wrap"><code>notification.addEventListener(&#x27;click&#x27;, () =&gt; {
window.open(&#x27;https://sitepoint.com&#x27;)
}, false);</code></pre><h3 id="bfa41318-00bf-49bc-99e9-73a18fbfe990" class="">Multimedia</h3><p id="0b4432b1-9914-4832-a6e4-c73a715f4937" class="">Before HTML5, it was notoriously difficult to display audio and video in browsers, and plugins such as Flash often had to be used. HTML5 introduced the <code>&lt;audio&gt;</code> and <code>&lt;video&gt;</code> tags used to insert audio and video clips into a web page. It also introduced a Media API for controlling the playback of the clips using JavaScript.</p><p id="95332f46-43db-4385-b527-937ec46ec70b" class="">An audio clip can be inserted into a page with the <code>&lt;audio&gt;</code> tag, using the <code>src</code> attribute to point to the audio file:</p><pre id="6a4fe0af-08bc-4061-b3f7-f122a1ca242f" class="code code-wrap"><code>&lt;audio src=&#x27;/song.mp3&#x27; controls&gt;
Your browser does not support the audio element.
&lt;/audio&gt;</code></pre><p id="be18580f-e7f8-42bf-9655-db0ec0688238" class="">A video clip can be inserted with the <code>&lt;video&gt;</code> tag, using the <code>src</code> attribute to point to the movie file:</p><pre id="3f5915fb-06bd-4cea-afde-a34782aa74ad" class="code code-wrap"><code>&lt;video src=&#x27;http://movie.mp4&#x27; controls&gt;
    Your browser does not support the video element.
&lt;/video&gt;</code></pre><p id="dbaa8459-7dcf-489c-a9c4-4aefe21ce00b" class="">Any content inside the <code>&lt;audio&gt;</code> or <code>&lt;video&gt;</code> tags will only display if the browser does not support them; hence, it can be used to display a message to users of older browsers without support for these features. The <code>controls</code> attribute can be added (without any value) and will display the browser’s native controls, such as play, pause, and volume control, as can be seen in the screenshot below.</p><p id="fc553f52-f501-4aee-b2e1-e2f27c953919" class="">The audio or video element can be referenced by a variable using one of the DOM methods:</p><pre id="a9f05ad4-d59b-4bc2-922a-9c405c594cc6" class="code code-wrap"><code>const video = document.getElementsByTagName(&#x27;video&#x27;)[0];</code></pre><p id="cdedcb2a-71c4-4589-aee1-3c83a52d1dcd" class="">The <code>play()</code> method will start the clip playing from its current position:</p><pre id="04ec97b7-6cb6-42b5-b9d9-6086a86dedc7" class="code code-wrap"><code>video.play();</code></pre><p id="2dceaf82-348f-438f-9a00-eb25dedcd626" class="">The <code>pause()</code> method will pause the clip at its current position:</p><pre id="81c6b4ab-b00d-458b-a98c-6d23df881bff" class="code code-wrap"><code>video.pause();</code></pre><p id="823217e3-1e76-49c7-998f-e26ac009610c" class="">The <code>volume</code> property is a number that can be used to set the audio volume:</p><pre id="fab76e85-febb-43e1-a262-083dcdcc7c83" class="code code-wrap"><code>video.volume = 0.9;</code></pre><p id="cc493a8d-0b00-47e7-ac0a-6d1d93d2aa7d" class="">The <code>muted</code> property is a boolean value that can be used to mute the audio:</p><pre id="d158859b-f050-43de-b77d-c4cad27b0ac1" class="code code-wrap"><code>video.muted = true;</code></pre><p id="0db3a51b-fcdc-4328-8800-4e5c1cab6547" class="">The <code>currentTime</code> property is a number value that can be used to jump to another part of the clip:</p><pre id="22db1f43-df73-4229-abef-12135a2b8ab6" class="code code-wrap"><code>video.currentTime += 10; // jumps forward 10 seconds</code></pre><p id="9b718c7d-6a1b-4c49-b4be-4a40860cac10" class="">The <code>playbackRate</code> property is used to fast-forward or rewind the clip by changing its value. A value of <code>1</code> is playback at normal speed:</p><pre id="1e6e2edd-ad65-4c78-8d05-06cf710bfe9c" class="code code-wrap"><code>video.playbackRate = 8; // fast-forward at 8 times as fast</code></pre><p id="2e8f7b0e-fab2-4279-b9cc-6246d88e01d4" class="">The <code>loop</code> property is a boolean value that can be set to <code>true</code> to make the clip repeat in a loop:</p><pre id="33924783-5296-43d9-800b-613cd725bc74" class="code code-wrap"><code>video.loop = true;</code></pre><p id="28510ce9-d0dc-4a64-9e14-6289bf564b6f" class="">The <code>duration</code> property can be used to see how long the clip lasts:</p><pre id="d98f3699-47c4-47e6-b567-200da6ffd0bb" class="code code-wrap"><code>video.duration;&lt;&lt; 52.209</code></pre><p id="564a0818-3fd1-443b-97df-7bedd2221236" class="">Some of the properties are only available once the browser has received all the metadata associated with the video. This means that, in order to ensure a value is returned, you should use an event listener that fires once the metadata has loaded, like the one shown below:</p><pre id="a5f6400c-9690-47b0-8006-195c47d0c38a" class="code code-wrap"><code>video.addEventListener(&#x27;loadedmetadata&#x27;, () =&gt; { console.log(video.duration); });</code></pre><p id="0a276e35-1e10-4f92-b45f-5cf36de84fcc" class="">Audio and video clips also have a number of events that will fire when they occur, including:</p><ul id="87490011-4c31-49ef-8cec-21c811c8e79d" class="bulleted-list"><li>The <code>play</code> event, which fires when the clip starts and when it resumes after a pause.</li></ul><ul id="44461105-f0ba-49d2-9d6d-6333b47416be" class="bulleted-list"><li>The <code>pause</code> event, which fires when the clip is paused.</li></ul><ul id="a9e10743-51f4-4518-8a7a-b5e61388f455" class="bulleted-list"><li>The <code>volumechange</code> event, which fires when the volume is changed.</li></ul><ul id="cbdf0b35-7384-4b95-b8b7-ea7429aeab33" class="bulleted-list"><li>The <code>loadedmetadata</code> event, which we saw in the note above, and which fires when all the video&#x27;s metadata has loaded.</li></ul><p id="929f7af6-ebe9-4c75-b1ce-aa80227c0967" class="">These events allow you to respond to any interactions the user has with the video. For example, the following event listener can be added to check whether the user has paused the video:</p><pre id="516287cd-d682-431a-8b2f-b34b702db79a" class="code code-wrap"><code>video.addEventListener(&#x27;pause&#x27;, () =&gt; {
console.log(&#x27;The video has been paused&#x27;); }, false)</code></pre><h3 id="f35f4076-16fa-41c3-97b7-a103c82c49b4" class="">Drawing with Canvas</h3><p id="1d61c99f-4954-4958-83a8-7b7abf473aa7" class="">The <code>canvas</code> element was introduced to allow graphics to be drawn onto a web page in real time using JavaScript. A <code>canvas</code> element is a rectangular element on the web page. It has a coordinate system that starts at (0,0) in the top-left corner. To add a <code>canvas</code> element to a page, the <code>&lt;canvas&gt;</code> tag is used specifying a <code>height</code> and <code>width</code> . Anything placed inside the tag will only display if the <code>canvas</code> element is unsupported:</p><pre id="97e1fe17-1ea0-4700-b0d2-9adef6f38fe9" class="code code-wrap"><code>&lt;canvas id=&#x27;canvas&#x27; width=&#x27;400&#x27; height=&#x27;400&#x27;&gt;Sorry, but your browser does not support the canvas element&lt;/canvas&gt;</code></pre><p id="15c7fedd-d382-4c59-b34f-3c9c5b247f5b" class="">This canvas can now be accessed in a JavaScript program using the <code>document.getElementById()</code> method:</p><pre id="4f18a6e2-975f-427c-a0cc-41533dee5a98" class="code code-wrap"><code>const canvasElement = document.getElementById(&#x27;canvas&#x27;);</code></pre><p id="871b9ff2-00a2-4c03-a997-e6c0c4660fe1" class="">The next step is to access the context of the canvas. This is an object that contains all the methods used to draw onto the canvas. We&#x27;ll be using a 2-D context, but it’s also possible to render in 3-D using<a href="https://developer.mozilla.org/en/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL">WebGL</a>.</p><p id="78e798f6-643a-4cb1-a4c2-9043805a4587" class="">The <code>getContext()</code> method is used to access the context:</p><pre id="04014543-0796-4030-a95d-ffebeeb0b759" class="code code-wrap"><code>const context = canvasElement.getContext(&#x27;2d&#x27;);</code></pre><p id="28420275-841a-4ac4-bd2a-83781bd42251" class="">Now we have a reference to the context, we can access its methods and draw onto the canvas. The fill and stroke colors can be changed by assigning a CSS color to the <code>fillStyle</code> and <code>strokeStyle</code> properties respectively:</p><pre id="2980f79c-15e5-40a1-aa0e-1475d2d9fd08" class="code code-wrap"><code>context.fillStyle = &quot;#0000cc&quot;; // a blue fill color 
context.strokeStyle = &quot;#ccc&quot;; // a gray stroke color</code></pre><p id="5eb97eaa-6dc8-4064-b4b2-9653dfa67c8c" class="">These colors will be utilized for everything that’s drawn onto the canvas until they’re changed.</p><p id="9c0439f7-dc66-4f46-88a5-d353f32058d7" class="">The <code>lineWidth</code> property can be used to set the width of any line strokes drawn onto the canvas. It defaults to one pixel and remains the same until it’s changed:</p><pre id="7b99608a-e832-4d8b-92ae-c9588fe4bb5a" class="code code-wrap"><code>context.lineWidth = 4;</code></pre><p id="a552ea0a-0d63-4888-928b-cc638f1b2994" class="">The <code>fillRect()</code> method can draw a filled-in rectangle. The first two parameters are the coordinates of the top-left corner, the third parameter is the width, and the last parameter is the height.</p><pre id="31c7cb57-0436-483a-8170-853cb92bb5e2" class="code code-wrap"><code>context.fillRect(10,10,100,50);</code></pre><p id="0c7a92af-8e6f-4501-a5c3-5774bff51daf" class="">The <code>strokeRect()</code> method works in the same way, but produces a rectangle that is not filled in.</p><pre id="092d8b7c-369a-4044-ae1f-14e14c599669" class="code code-wrap"><code>context.strokeRect(10,100,100,50);</code></pre><p id="2f6de22d-7699-4a91-a08d-315328f22820" class="">Straight lines can be drawn employing the <code>moveTo()</code> and<code> lineTo()</code> methods. These methods can be used together to produce a path. Nothing will actually be drawn onto the canvas until the <code>stroke()</code> method is called. The following example will draw a thick red T shape onto the canvas by moving to the coordinates (150,50), then drawing a horizontal line 30 pixels long, and finally moving to the middle of that line and drawing a vertical line 40 pixels long:</p><pre id="2479db01-f1f7-4035-bce5-9826622ff849" class="code code-wrap"><code>context.beginPath();
context.moveTo(130, 50);
context.lineTo(180, 50);
context.moveTo(155, 50);
context.lineTo(155, 90);
context.strokeStyle = &#x27;#c00&#x27;;
context.lineWidth = 15;
context.stroke();</code></pre><p id="619ccb72-b27b-4678-b206-3b4580f1d5b8" class="">The <code>arc()</code> method can be used to draw an arc of a given radius from a particular point. The first two parameters are the coordinates of the center of the arc; the next parameter is the radius, followed by the start angle, then the finish angle (note that these are measured in radians). The last parameter is a boolean value that says whether the arc should be drawn counter-clockwise. The following example will draw a yellow circle of radius 30 pixels at center (200,200), since <code>Math.PI * 2</code> represents a full turn:</p><pre id="c82ee794-06a6-4160-9712-02065ad76c1d" class="code code-wrap"><code>context.beginPath();
context.arc(200, 200, 30, 0, Math.PI * 2, false);
context.strokeStyle = &#x27;#ff0&#x27;;
context.lineWidth = 4;
context.stroke();</code></pre><p id="24f61268-2856-4bf1-adf1-9388a98d9a83" class="">The <code>fillText()</code> method is used to write text onto the canvas. The first parameter is the text to be displayed, while the next two parameters are the x and y coordinates, respectively. The <code>font</code> property can be used to set the font style used, otherwise the style is inherited from the <code>canvas</code> element’s CSS setting (note that it needs to be changed before the <code>fillText()</code> method is used to draw the text). The following example will draw the text “Hello” in green at coordinates (20,50), as shown below.</p><pre id="5d941568-42d8-4a2b-8acf-b2dd038005d9" class="code code-wrap"><code>context.fillStyle = &#x27;#0c0&#x27;; // a blue fill color
context.font = &#x27;bold 26px sans-serif&#x27;;
context.fillText(&#x27;Hello&#x27;, 20, 200);</code></pre></div></article></body></html>